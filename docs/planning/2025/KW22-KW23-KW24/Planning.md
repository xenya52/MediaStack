### Planning

Building the fundamental features while keeping the code clean and maintainable. Is the main focus of this version.

Furthermore, I want to ensure that the application is easy to extend in the future, so I will try to follow best practices and design patterns.

I want to mention that I try for education purposes to code with the test driven development (TDD) approach, so a little disclaimer at this point that the code may contain some bugs.

#### Features

- [x] Upload images, videos, and PDF files
- [x] Overview of all stored media
- [ ] Display images directly in the browser
- [ ] Embed PDF files in the browser
- [ ] Play videos
- [x] Delete files via the UI
- [x]️ Store metadata such as filename, type, and upload timestamp

#### Expected timeframe

Total timespan: 2025-05-29 -> 2023-06-12 (two Weeks)

**Week 1:**

1. 29.05 - Time Planning and Project Setup (1h)
    - Create a new Spring Boot project with Vaadin
    - Set up SQLite database connection
    - Create initial folder structure and class diagram
    - Create initial README.md file with project description and TODOs
2. 30.05 - Implement test cases for the MediaFile model, Implement MediaFile model and repository, create SQLite database (2h)
    - Change Java version to 23 because of Vaadin 24 and Java 17 makes no sense for me because I do not need to refactor anything up
    - Create Tests for MediaFileModel, MediaFileModelBuilder and MediaFileDirector because I want to use the builder pattern for my Model with multiple properties and Constructor
    - Add lombok to the project for easier model creation and reduce boilerplate code
    - Create MediaFile model with properties like id, name, fileType, uploadDate, and path
    - Add dependency for validating my model with annotations like @NotNull, @NotBlank, etc.
    - Add JPA API, JPA Implementation and JDBC with starter-data-jpa to the project
    - Create MediaRepository interface for CRUD operations on MediaFile
    - Create Builder and Director for MediaFile model to simplify object creation
    - Add SQLite database dependency to the project (sqlite-jdbc)
    - Add SQLite dialect plugin to the project for JPA
    - Add SQLite database configuration to application.properties
3. 31.05 - Implement test cases for MediaService, Implement MediaService with upload and delete functionality, create service interface (2h)
    - Fix the MediaFileModel with adding a @AllArgsConstructor and @NoArgsConstructor annotation for the Builder and Director pattern
    - Removed @SpringBootTest annotation from the MediaFileModelTests because it is not needed to get the full Spring context loaded
    - Add an application.properties to the tests and rename the root gradle.properties.kts file to application.properties
    - Adjust the MediaFileModel with more persistence and validation annotations, furthermore add lombok toString() annotation
    - Edit the id in MediaFileModel to a Long type and add @GeneratedValue(strategy = GenerationType. IDENTITY) annotation to it
    - Fixed expected String test for MediaFileModel
    - Add LocalDateTime to the director parameters and adjust tje director tests for that
   ---
    - Create tests for MediaService with JUnit 5 and Mockito for get, upload and delete functionality
    - Implement MediaService with methods for getting, uploading and deleting media files
    - Change MediaFileModel in Director to use the current date and never set an id because it is generated by the database
    - Adjust the MediaFileModel Director tests for the new changes in the Director class
    - Create dummy MediaFiles in Mock up database for the MediaService tests
4. 01.06 - Implement test cases for MainView, Implement MainView with upload and delete functionality, create UI components (2h)
    - Add a default view to get into vaadin, worked after the first run
    - Setup AppShellConfig for vaadin to use the correct theme and icons
    - Create a config folder for the ShellConfig
    - Add a Header and a coloring button for deeper understanding of the Vaadin framework
    - Add multiple functions to the MainView
        - setupUpload() has the functionality to upload files
        - getFileType() determines the file type based on the file extension
        - setupGrid() sets up the grid to display media files
        - refreshGrid() refreshes the grid to show the latest media files
    - Add tests for MainView with JUnit, but afterward what was a mistake because of my TDD rule
5. 02.06 - Implement file upload, deletion functionality (IDK I think there a no tests possible form my view now), Implement file storage in the local file system (1h)
    - Didn't happen
6. 03.06 - Bug fixing and code cleanup, looking for potential patterns (1h)
    - Didn't happen
7. 04.06 - A short User Manual / Documentation and final touches (30 min)
    - Didn't happen
- 04.6 - Adjust Readme.md, Add a file storage service, No db caching anymore, work with TDD (2h)
    - Already implemented the file upload and deletion functionality in the MainView, so I just need to add the file storage in the local file system
    - Add tests for MediaFileStorageService to ensure file storage works correctly
    - Add a MediaFileStorageService to handle file storage in the local file system, and add every .db to the .gitignore file
    - Put MediaDatabase from a temporary cache to a SQLite database in my project root
        - jdbc:sqlite:memory:myDb?cache=shared -> jdbc:sqlite:media-stack.db, and ddl-auto is set to update
    - Make a final MediaFileService Attribute for MediaFileStorageService to handle file storage
    - Adjust the README.md file with a short user manual and documentation
    - Total not needed at this point because everything works as expected
        - (Note: Consider improve the user experience with better error handling and design)
    - No design patterns used at this point, but I think the Builder and Director pattern is a good choice for the MediaFileModel

**Week 2:**

~~Literally just a buffer week to catch up on the project and fix bugs.~~
1. 05.06 - Move to own repo, check if there's a possibility to move the git history (30 min)
    - Yes there's a possibility to move the git history, but I don't want to do this because I'm worried about too many commits at one day
2. 06.06 - Plan the following days, refactor "planning section" to a separate .md, write some retrospective notes (1h)
    - Add a docs folder with planning and developing
    - Add Retrospektive for KW22 and KW23
    - Checked the missing features for my Plan
    - Add steps for the upcoming week
    - Remove the Planning from the root README.md
3. 07.06 - Implement test cases to preview Medias (Videos, PDFs and Images) (1h)
    - Delete files that I accidentally added to the git repository
    - Add tests for pdfPreview, imagePreview and videoPreview
    - Create a MediaPreviewView a VideoJsPlayer and a PdfViewer for the upcoming logic that I'll implement
4. 08.06 - refactor MediaFileModel and director, Implement Media preview (PDFs, Videos and Images), Add a "Header" into the UI (1h 30min)
   4.1 backup / Begin with implementing Media previews        
      All tests are running green
      Preview button works fine
      TODO
      Preview Video, PDF and Image correctly
      Remove the tests files after the testing
      Timeframe for today 2h and 30min
   4.2 backup, refactor / refactor MediaFileModel and director, adjust service and Repository
   - Fix the MediaFiles Testfiles that get uploaded to the database
   - Refactor the director for the MediaFileModel
   - Refactor the MediaFileService to use the MediaFileModel Director for creating MediaFile objects
   - Add data attribute to the MediaFileModel to store the file data as a blob
   - Add column definitions to the MediaFileModel for the preview functionality
   - Add column names to the MediaFileModel for the preview functionality
   - Remove Spring validation annotations from the MediaFileModel because they are not needed for the preview functionality
   - Remove the Setter lombok annotations from the MediaFileModel because they are not needed
   4.3 backup, refactor / wanna backup my state of MediaFileModelBuilder, ui
   - Rename attributes of the MediaFileModelBuilder to match the MediaFileModel attributes
   - Beginn with Modularize the compnents in the UI
   4.4 backup, fix / Adjust UI modules, fix bean error
   - Adjust the UI modules to use the MediaFileModelBuilder
   - Fix the bean error in the MainView by adding the MediaFileModelBuilder as a bean
5. 09.06 - Add tests to edit file Names, Add possibility to Edit File Names (1h)
6. 10.06 - Adjust documentation (+Developer doc), Make a universal artifact (1h)
7. 11.06 - Try to find bugs, Retrospective, Adjust planning


---